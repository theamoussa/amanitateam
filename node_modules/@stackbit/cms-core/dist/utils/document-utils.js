"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAllModelsFromCSIDocument = void 0;
const getModelsFromFields = (fields, foundModels) => {
    fields.forEach((field) => {
        if (field.type === 'model') {
            if (field.localized) {
                for (const localeObject of Object.values(field.locales)) {
                    foundModels.add(localeObject.modelName);
                    getModelsFromFields(Object.values(localeObject.fields), foundModels);
                }
            }
            else {
                foundModels.add(field.modelName);
                getModelsFromFields(Object.values(field.fields), foundModels);
            }
        }
        else if (field.type === 'object') {
            if (field.localized) {
                for (const localeObject of Object.values(field.locales)) {
                    getModelsFromFields(Object.values(localeObject.fields), foundModels);
                }
            }
            else {
                getModelsFromFields(Object.values(field.fields), foundModels);
            }
        }
        else if (field.type === 'list') {
            if (field.localized) {
                for (const localeObject of Object.values(field.locales)) {
                    getModelsFromFields(localeObject.items, foundModels);
                }
            }
            else {
                getModelsFromFields(field.items, foundModels);
            }
        }
    });
};
function getAllModelsFromCSIDocument({ document }) {
    const models = new Set([document.modelName]);
    getModelsFromFields(Object.values(document.fields), models);
    return Array.from(models);
}
exports.getAllModelsFromCSIDocument = getAllModelsFromCSIDocument;
//# sourceMappingURL=document-utils.js.map