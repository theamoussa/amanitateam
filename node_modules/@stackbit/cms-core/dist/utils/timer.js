"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Timer = void 0;
class Timer {
    constructor({ timerCallback, timerMs = 30 * 60 * 1000, logger }) {
        this.timerCallback = timerCallback;
        this.timerMs = timerMs;
        this.logger = logger?.createLogger({ label: 'timer' });
        this.timeout = null;
        this.handleTimeout = this.handleTimeout.bind(this);
    }
    isRunning() {
        return !!this.timeout;
    }
    startTimer() {
        this.resetTimer();
    }
    resetTimer() {
        this.stopTimer();
        this.timeout = setTimeout(this.handleTimeout, this.timerMs);
    }
    stopTimer() {
        if (this.timeout) {
            clearTimeout(this.timeout);
            this.timeout = null;
        }
    }
    handleTimeout() {
        this.logger?.debug('timer reached');
        this.timeout = null;
        this.timerCallback();
    }
}
exports.Timer = Timer;
//# sourceMappingURL=timer.js.map